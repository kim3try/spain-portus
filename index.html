<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>스페인 & 포르투갈 2주 여행 플래너</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Mediterranean Calm -->
    <!-- Application Structure Plan: 본 앱은 사용자가 여행 정보를 비선형적으로 탐색할 수 있도록 대시보드 스타일의 탭 기반 구조로 설계되었습니다. '추천 일정', '여행 예산', '도시별 정보', '핵심 정보'의 네 가지 주요 섹션으로 구성하여, 사용자가 가장 궁금한 정보부터 자유롭게 접근할 수 있도록 했습니다. 이 구조는 선형적인 보고서 형식보다 사용자의 필요에 즉각적으로 반응하며, 일정 비교, 예산 시뮬레이션 등 동적인 상호작용을 통해 계획 과정을 더 직관적이고 효율적으로 만듭니다. -->
    <!-- Visualization & Content Choices: 보고서의 핵심 정보를 효과적으로 전달하기 위해 다음과 같이 시각화 및 상호작용 방식을 선택했습니다. [추천 일정]은 버튼으로 4가지 동선을 쉽게 전환하며 비교할 수 있도록 설계했습니다. 각 일정은 도시별로 묶어 아코디언 메뉴처럼 펼쳐 볼 수 있게 했습니다. [여행 예산]은 Chart.js의 도넛 차트를 사용하여 비용 구조를 시각화하고, 슬라이더를 통해 사용자가 예산을 직접 조절하며 총비용 변화를 즉시 확인할 수 있게 했습니다. [핵심 정보]는 탭을 활용하여 방대한 텍스트 정보를 깔끔하게 정리하고 필요시 상세 내용을 볼 수 있도록 구성했습니다. 이 모든 요소는 사용자의 이해를 돕고 능동적인 정보 탐색을 유도하기 위해 선택되었으며, SVG나 Mermaid JS는 사용하지 않았습니다. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 450px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .nav-button.active { background-color: #A0522D; color: white; }
        .plan-button.active { background-color: #CD853F; color: white; }
        .info-tab.active { border-color: #A0522D; color: #A0522D; border-bottom-width: 2px; }
        [x-cloak] { display: none; }
        .iti-card { border-left: 3px solid #CD853F; }
        .city-day-card { background-color: #F8F8F8; padding: 1rem; border-radius: 0.5rem; margin-top: 0.5rem; }
    </style>
</head>
<body class="bg-[#FDF5E6] text-[#694A38]">

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#A0522D] mb-2">스페인 & 포르투갈 2주 여행</h1>
            <p class="text-lg text-[#8B4513]">2026년 2월, 친구와 함께 떠나는 완벽 가이드</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
            <button data-target="plan" class="nav-button active w-full sm:w-auto px-6 py-3 bg-[#DEB887] text-[#694A38] font-semibold rounded-lg shadow-md hover:bg-[#CD853F] transition-colors duration-300">🗺️ 추천 일정</button>
            <button data-target="budget" class="nav-button w-full sm:w-auto px-6 py-3 bg-[#DEB887] text-[#694A38] font-semibold rounded-lg shadow-md hover:bg-[#CD853F] transition-colors duration-300">💰 여행 예산</button>
            <button data-target="cities" class="nav-button w-full sm:w-auto px-6 py-3 bg-[#DEB887] text-[#694A38] font-semibold rounded-lg shadow-md hover:bg-[#CD853F] transition-colors duration-300">🏙️ 도시별 정보</button>
            <button data-target="info" class="nav-button w-full sm:w-auto px-6 py-3 bg-[#DEB887] text-[#694A38] font-semibold rounded-lg shadow-md hover:bg-[#CD853F] transition-colors duration-300">📝 핵심 정보</button>
        </nav>

        <main>
            <section id="plan" class="content-section">
                <div class="bg-white/50 p-6 rounded-xl shadow-lg backdrop-blur-sm">
                    <h2 class="text-2xl font-bold text-[#A0522D] mb-4 text-center">추천 여행 일정 비교</h2>
                    <p class="text-center text-[#8B4513] mb-6">두 분의 여행 스타일에 맞는 최적의 동선을 찾아보세요. 각 일정은 축구 경기, 도시 간 이동 효율성, 그리고 2월의 날씨를 고려하여 세심하게 구성되었습니다. 아래 버튼을 눌러 각 일정의 상세 내용을 확인할 수 있습니다.</p>
                    <div class="flex flex-wrap justify-center gap-3 mb-6">
                        <button data-itinerary="1" class="plan-button active px-5 py-2 bg-[#F5DEB3] text-[#8B4513] font-medium rounded-md hover:bg-[#CD853F] hover:text-white transition-colors">#1 바르셀로나 IN</button>
                        <button data-itinerary="2" class="plan-button px-5 py-2 bg-[#F5DEB3] text-[#8B4513] font-medium rounded-md hover:bg-[#CD853F] hover:text-white transition-colors">#2 포르투 IN</button>
                        <button data-itinerary="3" class="plan-button px-5 py-2 bg-[#F5DEB3] text-[#8B4513] font-medium rounded-md hover:bg-[#CD853F] hover:text-white transition-colors">#3 마드리드 IN</button>
                        <button data-itinerary="4" class="plan-button px-5 py-2 bg-[#F5DEB3] text-[#8B4513] font-medium rounded-md hover:bg-[#CD853F] hover:text-white transition-colors">#4 바르셀로나 IN (남부)</button>
                    </div>
                    <div id="itinerary-details"></div>
                </div>
            </section>

            <section id="budget" class="content-section hidden">
                <div class="bg-white/50 p-6 rounded-xl shadow-lg backdrop-blur-sm">
                    <h2 class="text-2xl font-bold text-[#A0522D] mb-4 text-center">나만의 여행 예산 시뮬레이터</h2>
                    <p class="text-center text-[#8B4513] mb-6">
                        2주 여행의 총 예상 경비를 항목별로 분석해 보세요. 항공권, 숙박 등 주요 비용의 비중을 차트로 확인하고, 아래 슬라이더를 조절하여 자신의 계획에 맞게 총경비를 실시간으로 재계산해볼 수 있습니다. (2인, 14일 기준)
                    </p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                        <div class="chart-container">
                            <canvas id="budgetChart"></canvas>
                        </div>
                        <div>
                            <div class="space-y-4">
                                <div>
                                    <label for="flightCost" class="font-medium text-[#8B4513]">항공권 (2인 왕복): <span id="flightValue" class="font-bold text-[#A0522D]"></span> KRW</label>
                                    <input type="range" id="flightCost" min="1600000" max="4000000" value="2800000" step="100000" class="w-full h-2 bg-[#F5DEB3] rounded-lg appearance-none cursor-pointer">
                                </div>
                                <div>
                                    <label for="lodgingCost" class="font-medium text-[#8B4513]">1박 평균 숙박비: <span id="lodgingValue" class="font-bold text-[#A0522D]"></span> EUR</label>
                                    <input type="range" id="lodgingCost" min="80" max="200" value="125" step="5" class="w-full h-2 bg-[#F5DEB3] rounded-lg appearance-none cursor-pointer">
                                </div>
                                <div>
                                    <label for="foodCost" class="font-medium text-[#8B4513]">1일 평균 식비 (2인): <span id="foodValue" class="font-bold text-[#A0522D]"></span> EUR</label>
                                    <input type="range" id="foodCost" min="50" max="100" value="70" step="5" class="w-full h-2 bg-[#F5DEB3] rounded-lg appearance-none cursor-pointer">
                                </div>
                                <div>
                                    <label for="activityCost" class="font-medium text-[#8B4513]">1일 평균 활동비 (2인): <span id="activityValue" class="font-bold text-[#A0522D]"></span> EUR</label>
                                    <input type="range" id="activityCost" min="20" max="60" value="30" step="5" class="w-full h-2 bg-[#F5DEB3] rounded-lg appearance-none cursor-pointer">
                                </div>
                            </div>
                            <div class="mt-8 text-center bg-[#DEB887] p-4 rounded-lg">
                                <p class="text-lg font-medium text-[#694A38]">총 예상 경비 (2인)</p>
                                <p id="totalBudget" class="text-3xl font-bold text-[#A0522D]"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="cities" class="content-section hidden">
                <div class="bg-white/50 p-6 rounded-xl shadow-lg backdrop-blur-sm">
                    <h2 class="text-2xl font-bold text-[#A0522D] mb-4 text-center">도시별 매력 탐구 ✨</h2>
                     <p class="text-center text-[#8B4513] mb-6">방문할 도시들의 핵심 정보를 확인해 보세요. 각 도시의 놓칠 수 없는 풍경과 경험, 그리고 꼭 맛봐야 할 대표 음식들을 정리했습니다. 도시 이름을 클릭하면 상세 정보가 펼쳐집니다.</p>
                    <div id="city-info-container" class="space-y-4"></div>
                </div>
            </section>

            <section id="info" class="content-section hidden">
                 <div class="bg-white/50 p-6 rounded-xl shadow-lg backdrop-blur-sm">
                    <h2 class="text-2xl font-bold text-[#A0522D] mb-4 text-center">여행자를 위한 핵심 정보</h2>
                    <p class="text-center text-[#8B4513] mb-6">성공적인 여행을 위해 꼭 알아야 할 실용적인 정보들을 모았습니다. 날씨와 준비물부터 교통, 안전 수칙까지, 여행 전 꼼꼼히 확인하여 편안하고 안전한 여행을 준비하세요.</p>
                    <div class="border-b border-gray-300 mb-4">
                        <nav class="-mb-px flex flex-wrap justify-center space-x-4 md:space-x-8" aria-label="Tabs">
                            <button class="info-tab active whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm" data-infotab="weather">날씨와 준비물</button>
                            <button class="info-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-infotab="transport">교통 정보</button>
                            <button class="info-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-infotab="safety">안전 및 에티켓</button>
                            <button class="info-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-infotab="cost_saving">경비 절약 팁</button>
                        </nav>
                    </div>
                    <div id="info-content-container"></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        const citiesData = [
            {
                name: '바르셀로나(스페인)', icon: '🎨', country: '스페인', food: '피데우아(해산물 파스타 파에야), 에스칼리바다(구운 채소 샐러드), 아로스 네그레(오징어 먹물밥), 츄러스, 카바(스파클링 와인).', sights: [
                    { name: '사그라다 파밀리아', desc: '가우디의 미완성 걸작으로, 웅장한 규모와 섬세한 건축미를 자랑합니다.' },
                    { name: '구엘 공원', desc: '가우디의 상상력이 담긴 독특한 조형물과 모자이크를 감상할 수 있는 공원입니다.' },
                    { name: '고딕 지구', desc: '좁은 골목과 숨겨진 광장을 따라 중세 시대의 분위기를 느낄 수 있는 구시가지입니다.' },
                    { name: '바르셀로네타 해변', desc: '지중해의 활기찬 분위기와 여유를 즐길 수 있는 해변입니다.' },
                    { name: '피카소 미술관', desc: '천재 화가 피카소의 초기 작품부터 다양한 시기별 작품을 만날 수 있는 곳입니다.' },
                    { name: '빛 축제(Llum BCN)', desc: '2월 7~9일에 열리며, 포블레노우 지역에서 다양한 조명 예술 작품을 볼 수 있습니다.' },
                    { name: '산타 에우랄리아 축제', desc: '2월 11~16일에 열리는 카탈루냐 전통 축제로, 다양한 문화 행사를 즐길 수 있습니다.' }
                ]
            },
            {
                name: '포르투(포르투갈)', icon: '🍷', country: '포르투갈', food: '포트 와인, 신선한 해산물 요리 (특히 대구 요리).', sights: [
                    { name: '도루강변', desc: '낭만적인 분위기 속에서 포트 와인 한 잔을 즐기기 좋은 곳입니다.' },
                    { name: '렐루 서점', desc: '해리포터 작가에게 영감을 주었다고 알려진 아름다운 서점입니다.' },
                    { name: '상벤투역', desc: '내부 벽면을 장식한 화려한 아줄레주(타일) 예술이 인상적인 역입니다.' },
                    { name: '동 루이스 1세 다리', desc: '도루강을 가로지르는 아름다운 다리로, 포르투의 상징 중 하나입니다.' },
                    { name: '포트 와인 셀러 투어', desc: '포트 와인의 제조 과정을 배우고 직접 시음해볼 수 있는 필수 코스입니다.' },
                    { name: '도루 밸리 와이너리 투어', desc: '와인밭이 펼쳐진 아름다운 도루 계곡에서 와인과 풍경을 함께 즐길 수 있습니다.' }
                ]
            },
            {
                name: '마드리드(스페인)', icon: '👑', country: '스페인', food: '코시도 마드리예노(전통 스튜), 다양한 타파스, 초콜릿과 츄러스.', sights: [
                    { name: '마드리드 왕궁', desc: '스페인 왕실의 화려한 역사를 느낄 수 있는 웅장한 건축물입니다.' },
                    { name: '프라도 미술관', desc: '벨라스케스, 고야 등 스페인 거장들의 작품을 만날 수 있는 세계적인 미술관입니다.' },
                    { name: '마요르 광장', desc: '스페인 사람들의 활기찬 삶과 에너지를 느낄 수 있는 역사적인 중심 광장입니다.' },
                    { name: '레티로 공원', desc: '도심 속에서 여유롭게 산책하거나 휴식하기 좋은 넓은 공원입니다.' },
                    { name: '마드리드 카니발', desc: '2월 14~18일에 열리며, 정열적인 축제 분위기를 만끽할 수 있습니다.' }
                ]
            },
            {
                name: '리스본(포르투갈)', icon: '🚋', country: '포르투갈', food: '파스텔 드 나타(에그타르트), 신선한 해산물 요리.', sights: [
                    { name: '제로니무스 수도원', desc: '대항해 시대를 상징하는 아름다운 건축물로, 포르투갈 마누엘린 양식의 걸작입니다.' },
                    { name: '코메르시우 광장', desc: '대서양을 향해 열려 있는 거대한 광장으로, 리스본의 상징적인 장소입니다.' },
                    { name: '신트라', desc: '동화 같은 분위기의 페나 성과 무어인의 성터가 있는 근교 도시입니다.' },
                    { name: '파두 공연', desc: '포르투갈의 정서가 담긴 전통 음악인 파두를 감상할 수 있습니다.' },
                    { name: '아줄레주 박물관', desc: '포르투갈의 독특한 타일 예술인 아줄레주의 역사와 작품을 볼 수 있는 곳입니다.' }
                ]
            },
            {
                name: '그라나다(스페인)', icon: '🕌', country: '스페인', food: '살모레호(차가운 토마토 수프), 레차소(어린 양고기 요리), 타파스.', sights: [
                    { name: '알함브라 궁전', desc: '이슬람 건축의 정수를 보여주는 유네스코 세계문화유산으로, 나스르 궁전, 헤네랄리페 정원 등으로 이루어져 있습니다.' },
                    { name: '알바이신 지구', desc: '그라나다의 구시가지로, 좁은 골목길을 거닐며 아랍 문화의 흔적을 느낄 수 있습니다.' },
                    { name: '산 니콜라스 전망대', desc: '알함브라 궁전과 시에라 네바다 산맥의 멋진 전경을 감상할 수 있는 최고의 장소입니다.' },
                    { name: '그라나다 대성당', desc: '고딕과 르네상스 양식이 혼합된 웅장한 대성당으로, 스페인 역사에서 중요한 의미를 갖습니다.' }
                ]
            },
            {
                name: '세비야(스페인)', icon: '💃', country: '스페인', food: '하몽 이베리코(이베리아 햄), 페스카이토 프리토(튀김 생선), 오렌지 와인.', sights: [
                    { name: '세비야 대성당', desc: '세계에서 가장 큰 고딕 양식의 대성당이자, 콜럼버스의 묘가 있는 곳으로 유명합니다.' },
                    { name: '알카사르', desc: '이슬람과 스페인 건축 양식이 결합된 왕궁으로, 아름다운 정원이 인상적입니다.' },
                    { name: '스페인 광장', desc: '웅장한 규모와 독특한 건축 양식으로 유명하며, 영화 촬영지로도 사용되었습니다.' },
                    { name: '플라멩코 공연', desc: '스페인의 정열적인 문화와 예술을 직접 느낄 수 있는 공연입니다.' }
                ]
            }
        ];
        
        const itinerariesData = {
            '1': {
                title: '일정 1: 바르셀로나(스페인) IN - 마드리드(스페인) - 리스본(포르투갈) - 포르투(포르투갈) OUT',
                description: '스페인 주요 도시를 먼저 경험하고 포르투갈로 이동하는 효율적인 경로입니다. 축구 경기 관람일을 유연하게 조절할 수 있는 장점이 있습니다.',
                highlights: [
                     { text: 'FC 바르셀로나 홈 경기 관람: 여행 4일차 (2월 8일 또는 22일 예상)', dateNote: '출발일: 2월 5일 또는 19일경 (여행 1일차)' },
                     { text: '레알 마드리드 홈 경기 관람: 여행 7일차 (2월 15일 또는 28일 예상)', dateNote: '출발일: 2월 9일 또는 22일경 (여행 1일차)' }
                ],
                total_estimated_cost_range: '약 290만원 ~ 440만원', // (2인, 항공권/축구티켓 별도)
                days: [
                    { day: '1', city: '바르셀로나(스페인)', activities: '인천 출발 후 바르셀로나(BCN) 도착, 숙소 체크인. 저녁에는 고딕 지구와 람블라스 거리 산책 및 타파스 투어.', daily_cost: '약 10-15만원 (1인 기준, 식비/교통비 등)', transport: '바르셀로나 공항(BCN) → 숙소: 공항버스 또는 기차, 택시' },
                    { day: '2', city: '바르셀로나(스페인)', activities: '가우디 건축물 투어 (사그라다 파밀리아, 구엘 공원, 카사 바트요 내부 관람).', daily_cost: '약 15-20만원 (1인 기준, 가우디 투어 및 입장료 포함)', transport: '도시 내 이동: 지하철 T-Casual 티켓 이용' },
                    { day: '3', city: '바르셀로나(스페인)', activities: '피카소 미술관 방문, 바르셀로네타 해변에서 여유로운 시간, 저녁에는 츄러스와 초콜릿 맛보기.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '4', city: '바르셀로나(스페인)', activities: '축구 경기 또는 몬주익 성 방문(일요일 무료 입장). 저녁에는 카바(스파클링 와인)와 함께 현지식 저녁 식사.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철' },
                    { day: '5', city: '마드리드(스페인)', activities: '바르셀로나에서 AVE 고속 열차로 마드리드 이동(약 3시간). 숙소 체크인 후 산 미구엘 시장에서 다양한 타파스 경험.', daily_cost: '약 15-20만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 바르셀로나 ↔ 마드리드 AVE 고속 열차' },
                    { day: '6', city: '마드리드(스페인)', activities: '프라도 미술관에서 스페인 거장들의 작품 감상(무료 입장 시간 활용). 마드리드 왕궁과 마요르 광장 둘러보기.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '7', city: '마드리드(스페인)', activities: '레알 마드리드 홈 경기 직관 또는 근교 도시 톨레도/세고비아 당일치기 투어.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철 / 근교 이동: 기차 또는 버스' },
                    { day: '8', city: '리스본(포르투갈)', activities: '마드리드에서 리스본으로 비행기 이동(약 1시간 15분). 숙소 체크인 후 28번 트램을 타고 알파마 지구 탐방.', daily_cost: '약 15-20만원 (1인 기준, 항공권 별도)', transport: '도시 간 이동: 마드리드 ↔ 리스본 비행기' },
                    { day: '9', city: '리스본(포르투갈)', activities: '벨렘 지구 투어 (제로니무스 수도원, 벨렘 탑) 및 원조 에그타르트 맛집 방문.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 트램 또는 버스' },
                    { day: '10', city: '리스본(포르투갈)', activities: '근교 신트라(Sintra) 당일치기 여행 (페나 성, 무어인의 성터).', daily_cost: '약 10-15만원 (1인 기준, 기차/입장료 포함)', transport: '근교 이동: 리스본 ↔ 신트라 기차' },
                    { day: '11', city: '리스본(포르투갈)', activities: '코메르시우 광장 산책 및 파두 공연 관람.', daily_cost: '약 10-15만원 (1인 기준, 공연 관람료 포함)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '12', city: '포르투(포르투갈)', activities: '리스본에서 포르투로 기차 이동(약 3시간). 숙소 체크인 후 도루 강변 산책 및 동 루이스 1세 다리 건너기.', daily_cost: '약 10-15만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 리스본 ↔ 포르투 기차' },
                    { day: '13', city: '포르투(포르투갈)', activities: '렐루 서점 방문, 상벤투역의 아줄레주 장식 감상. 오후에는 포트 와인 셀러 투어 및 시음.', daily_cost: '약 10-15만원 (1인 기준, 와인 투어 및 입장료 포함)', transport: '도시 내 이동: 도보 또는 지하철' },
                    { day: '14', city: '포르투(포르투갈)', activities: '자유시간 및 기념품 쇼핑 후 포르투(OPO) 공항으로 이동하여 출국.', daily_cost: '약 5만원 (1인 기준)', transport: '포르투 공항(OPO) → 숙소: 공항 메트로 또는 택시' }
                ]
            },
            '2': {
                title: '일정 2: 포르투(포르투갈) IN - 리스본(포르투갈) - 세비야(스페인) - 바르셀로나(스페인) OUT',
                description: '포르투갈을 먼저 깊이 경험하고 스페인 남부를 거쳐 바르셀로나로 이동합니다. 2월 포르투의 날씨 변동성을 고려해 여행 초반에 방문하는 동선입니다.',
                highlights: [
                     { text: 'FC 바르셀로나 홈 경기 관람: 여행 13일차 (2월 8일 또는 22일 예상)', dateNote: '출발일: 1월 27일 또는 2월 10일경 (여행 1일차)' }
                ],
                total_estimated_cost_range: '약 290만원 ~ 440만원',
                days: [
                    { day: '1', city: '포르투(포르투갈)', activities: '인천 출발 후 포르투(OPO) 도착. 숙소 체크인 및 도루 강변의 낭만적인 분위기 만끽.', daily_cost: '약 8-10만원 (1인 기준)', transport: '포르투 공항(OPO) → 숙소: 공항 메트로 또는 택시' },
                    { day: '2', city: '포르투(포르투갈)', activities: '렐루 서점과 상벤투역 방문. 오후에는 포트 와인 셀러 투어 및 시음.', daily_cost: '약 10-15만원 (1인 기준, 와인 투어 및 입장료 포함)', transport: '도시 내 이동: 도보' },
                    { day: '3', city: '포르투(포르투갈)', activities: '도루 밸리 와이너리 투어(전일) 또는 포즈(Foz) 지역 해변 산책.', daily_cost: '약 15-20만원 (1인 기준, 투어 비용 별도)', transport: '근교 이동: 투어 버스 또는 기차' },
                    { day: '4', city: '리스본(포르투갈)', activities: '포르투에서 기차로 리스본 이동. 숙소 체크인 후 28번 트램을 타고 시내 구석구석을 둘러보기.', daily_cost: '약 10-15만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 포르투 ↔ 리스본 기차' },
                    { day: '5', city: '리스본(포르투갈)', activities: '벨렘 지구 투어 및 원조 에그타르트 맛집 방문. 저녁에는 파두 공연 관람.', daily_cost: '약 10-15만원 (1인 기준, 파두 공연 포함)', transport: '도시 내 이동: 트램 또는 버스' },
                    { day: '6', city: '리스본(포르투갈)', activities: '근교 신트라 당일치기 (페나 성, 무어인의 성터).', daily_cost: '약 10-15만원 (1인 기준, 기차/입장료 포함)', transport: '근교 이동: 리스본 ↔ 신트라 기차' },
                    { day: '7', city: '리스본(포르투갈)', activities: '해양 수족관 방문 또는 알파마 지구 탐방 후 자유 시간.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '8', city: '세비야(스페인)', activities: '리스본에서 세비야로 비행기 이동(약 1시간 20분). 숙소 체크인 후 세비야 대성당 방문.', daily_cost: '약 15-20만원 (1인 기준, 항공권 별도)', transport: '도시 간 이동: 리스본 ↔ 세비야 비행기' },
                    { day: '9', city: '세비야(스페인)', activities: '알카사르 방문 및 스페인 광장 산책. 저녁에는 정통 플라멩코 공연 관람.', daily_cost: '약 15-20만원 (1인 기준, 입장료 및 플라멩코 공연 포함)', transport: '도시 내 이동: 도보' },
                    { day: '10', city: '세비야(스페인)', activities: '자유시간 및 다음 도시로의 이동 준비.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 도보' },
                    { day: '11', city: '바르셀로나(스페인)', activities: '세비야에서 바르셀로나로 기차 또는 비행기 이동(기차 약 5시간, 비행기 약 1시간 30분). 숙소 체크인 및 고딕 지구 산책.', daily_cost: '약 15-20만원 (1인 기준, 교통비 별도)', transport: '도시 간 이동: 세비야 ↔ 바르셀로나 비행기 또는 기차' },
                    { day: '12', city: '바르셀로나(스페인)', activities: '가우디 투어(사그라다 파밀리아, 구엘 공원 등).', daily_cost: '약 15-20만원 (1인 기준, 투어 및 입장료 포함)', transport: '도시 내 이동: 지하철' },
                    { day: '13', city: '바르셀로나(스페인)', activities: 'FC 바르셀로나 홈 경기 직관 또는 바르셀로네타 해변과 피카소 미술관 방문.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철' },
                    { day: '14', city: '바르셀로나(스페인)', activities: '자유 시간 후 바르셀로나(BCN) 공항으로 이동하여 출국.', daily_cost: '약 5만원 (1인 기준)', transport: '바르셀로나 공항(BCN) → 숙소: 공항버스 또는 기차' }
                ]
            },
            '3': {
                title: '일정 3: 마드리드(스페인) IN - 바르셀로나(스페인) - 포르투(포르투갈) - 리스본(포르투갈) OUT (축구 직관 최적화)',
                description: '축구 경기 직관을 최우선으로 고려하여 마드리드와 바르셀로나의 홈 경기 일정을 중심으로 유연하게 계획할 수 있도록 구성된 동선입니다.',
                highlights: [
                     { text: '레알 마드리드 홈 경기 관람: 여행 3일차 (2월 1일 또는 15일 예상)', dateNote: '출발일: 1월 30일 또는 2월 13일경 (여행 1일차)' },
                     { text: 'FC 바르셀로나 홈 경기 관람: 여행 7일차 (2월 8일 또는 22일 예상)', dateNote: '출발일: 2월 2일 또는 16일경 (여행 1일차)' }
                ],
                total_estimated_cost_range: '약 290만원 ~ 440만원',
                days: [
                    { day: '1', city: '마드리드(스페인)', activities: '인천 출발 후 마드리드(MAD) 도착. 숙소 체크인 및 레알 마드리드 홈구장 베르나베우 스타디움 투어.', daily_cost: '약 10-15만원 (1인 기준)', transport: '마드리드 공항(MAD) → 숙소: 공항 익스프레스 또는 지하철' },
                    { day: '2', city: '마드리드(스페인)', activities: '마드리드 카니발(2월 14-18일 해당 시) 또는 프라도 미술관(무료 입장 시간) 방문.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '3', city: '마드리드(스페인)', activities: '레알 마드리드 홈 경기 직관. 경기 전후의 활기찬 분위기 만끽.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철' },
                    { day: '4', city: '마드리드(스페인)', activities: '마드리드 왕궁, 마요르 광장 등 시내 명소 탐방 및 기념품 쇼핑.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 도보' },
                    { day: '5', city: '바르셀로나(스페인)', activities: '마드리드에서 AVE 고속 열차로 바르셀로나 이동. 숙소 체크인 후 FC 바르셀로나 홈구장 캄프 누 스타디움 투어.', daily_cost: '약 15-20만원 (1인 기준, 교통비 별도)', transport: '도시 간 이동: 마드리드 ↔ 바르셀로나 AVE 고속 열차' },
                    { day: '6', city: '바르셀로나(스페인)', activities: '가우디 투어(사그라다 파밀리아, 구엘 공원 등) 및 빛 축제 관람(2월 7-9일 해당 시).', daily_cost: '약 15-20만원 (1인 기준, 투어 및 입장료 포함)', transport: '도시 내 이동: 지하철' },
                    { day: '7', city: '바르셀로나(스페인)', activities: 'FC 바르셀로나 홈 경기 직관. 경기장 인근에서 현지 팬들과 함께 경기 분위기 즐기기.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철' },
                    { day: '8', city: '바르셀로나(스페인)', activities: '고딕 지구에서 중세 분위기를 느끼고, 바르셀로네타 해변에서 산책 후 휴식.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 도보' },
                    { day: '9', city: '포르투(포르투갈)', activities: '바르셀로나에서 포르투로 비행기 이동(약 1시간 40분). 숙소 체크인 후 도루 강변을 거닐며 낭만적인 야경 감상.', daily_cost: '약 15-20만원 (1인 기준, 항공권 별도)', transport: '도시 간 이동: 바르셀로나 ↔ 포르투 비행기' },
                    { day: '10', city: '포르투(포르투갈)', activities: '렐루 서점 방문 후 포트 와인 셀러 투어 및 시음.', daily_cost: '약 10-15만원 (1인 기준, 와인 투어 및 입장료 포함)', transport: '도시 내 이동: 도보' },
                    { day: '11', city: '포르투(포르투갈)', activities: '도루 밸리 와이너리 투어(전일).', daily_cost: '약 15-20만원 (1인 기준, 투어 비용 별도)', transport: '근교 이동: 투어 버스 또는 기차' },
                    { day: '12', city: '리스본(포르투갈)', activities: '포르투에서 기차로 리스본 이동. 숙소 체크인 후 코메르시우 광장 및 알파마 지구 탐방.', daily_cost: '약 10-15만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 포르투 ↔ 리스본 기차' },
                    { day: '13', city: '리스본(포르투갈)', activities: '제로니무스 수도원, 벨렘 탑, 신트라 당일치기.', daily_cost: '약 10-15만원 (1인 기준, 기차/입장료 포함)', transport: '도시 내 이동: 트램/버스 / 근교 이동: 리스본 ↔ 신트라 기차' },
                    { day: '14', city: '리스본(포르투갈)', activities: '자유 시간 및 기념품 쇼핑, 리스본(LIS) 공항으로 이동 및 인천 출발.', daily_cost: '약 5만원 (1인 기준)', transport: '리스본 공항(LIS) → 숙소: 공항 메트로 또는 택시' }
                ]
            },
            '4': {
                title: '일정 4: 바르셀로나(스페인) IN - 그라나다(스페인) - 세비야(스페인) - 리스본(포르투갈) - 포르투(포르투갈) OUT',
                description: '축구 경기 관람을 시작으로, 스페인 남부의 이슬람 문화와 플라멩코의 정열을 경험한 후 포르투갈로 넘어가는 동선입니다. 2월의 따뜻한 날씨를 만끽할 수 있습니다.',
                highlights: [
                    { text: 'FC 바르셀로나 홈 경기 관람: 여행 4일차 (2월 8일 고정)', dateNote: '출발일: 2월 5일경 (여행 1일차)' }
                ],
                total_estimated_cost_range: '약 295만원 ~ 445만원',
                days: [
                    { day: '1', city: '바르셀로나(스페인)', activities: '인천 출발 후 바르셀로나(BCN) 도착, 숙소 체크인 및 고딕 지구 산책.', daily_cost: '약 10-15만원 (1인 기준, 식비/교통비 등)', transport: '바르셀로나 공항(BCN) → 숙소: 공항버스 또는 기차, 택시' },
                    { day: '2', city: '바르셀로나(스페인)', activities: '가우디 투어(사그라다 파밀리아, 구엘 공원). 저녁에는 현지 미식 즐기기.', daily_cost: '약 15-20만원 (1인 기준, 가우디 투어 및 입장료 포함)', transport: '도시 내 이동: 지하철 T-Casual 티켓 이용' },
                    { day: '3', city: '바르셀로나(스페인)', activities: '피카소 미술관 방문, 바르셀로네타 해변에서 휴식.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 지하철 또는 도보' },
                    { day: '4', city: '바르셀로나(스페인)', activities: 'FC 바르셀로나 홈 경기 직관! 경기 후 활기찬 분위기 만끽.', daily_cost: '약 15-20만원 (1인 기준, 축구 티켓 별도)', transport: '도시 내 이동: 지하철' },
                    { day: '5', city: '그라나다(스페인)', activities: '바르셀로나에서 그라나다로 비행기 이동(약 1시간 20분), 숙소 체크인. 오후에 알바이신 지구 탐방 및 산 니콜라스 전망대에서 야경 감상.', daily_cost: '약 15-20만원 (1인 기준, 항공권 별도)', transport: '도시 간 이동: 바르셀로나 ↔ 그라나다 비행기' },
                    { day: '6', city: '그라나다(스페인)', activities: '알함브라 궁전 투어(오전). 그라나다 대성당 방문 후 타파스 투어.', daily_cost: '약 15-20만원 (1인 기준, 입장료 포함)', transport: '도시 내 이동: 버스 또는 도보' },
                    { day: '7', city: '세비야(스페인)', activities: '그라나다에서 세비야로 이동(버스 약 3시간). 숙소 체크인 후 스페인 광장 방문.', daily_cost: '약 10-15만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 그라나다 ↔ 세비야 버스' },
                    { day: '8', city: '세비야(스페인)', activities: '세비야 대성당 및 알카사르 투어. 저녁에는 정통 플라멩코 공연 관람.', daily_cost: '약 15-20만원 (1인 기준, 입장료 및 플라멩코 공연 포함)', transport: '도시 내 이동: 도보' },
                    { day: '9', city: '세비야(스페인)', activities: '자유시간, 소품 쇼핑 후 리스본으로 이동 준비.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 도보' },
                    { day: '10', city: '리스본(포르투갈)', activities: '세비야에서 리스본으로 비행기 이동(약 1시간 20분). 숙소 체크인 후 벨렘 지구 투어.', daily_cost: '약 15-20만원 (1인 기준, 항공권 별도)', transport: '도시 간 이동: 세비야 ↔ 리스본 비행기' },
                    { day: '11', city: '리스본(포르투갈)', activities: '28번 트램을 타고 알파마 지구 탐방. 코메르시우 광장에서 여유로운 시간.', daily_cost: '약 8-10만원 (1인 기준)', transport: '도시 내 이동: 트램 또는 도보' },
                    { day: '12', city: '리스본(포르투갈)', activities: '근교 신트라(Sintra) 당일치기 여행.', daily_cost: '약 10-15만원 (1인 기준, 기차/입장료 포함)', transport: '근교 이동: 리스본 ↔ 신트라 기차' },
                    { day: '13', city: '포르투(포르투갈)', activities: '리스본에서 포르투로 기차 이동(약 3시간). 숙소 체크인 후 도루 강변 산책 및 포트 와인 시음.', daily_cost: '약 10-15만원 (1인 기준, 교통비 포함)', transport: '도시 간 이동: 리스본 ↔ 포르투 기차' },
                    { day: '14', city: '포르투(포르투갈)', activities: '렐루 서점, 상벤투역 방문 후 자유시간 및 기념품 쇼핑. 포르투(OPO) 공항으로 이동하여 출국.', daily_cost: '약 5만원 (1인 기준)', transport: '포르투 공항(OPO) → 숙소: 공항 메트로 또는 택시' }
                ]
            }
        };

        const infoData = {
            weather: {
                title: '날씨와 준비물',
                content: `
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">2월 날씨 특징</h4>
                    <p class="mb-4 text-[#8B4513]">스페인은 온화한 겨울 날씨를 보이지만, 포르투갈(특히 포르투)은 비가 잦을 수 있습니다. 일교차가 있으므로 겹쳐 입을 수 있는 옷차림이 중요합니다.</p>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">필수 준비물</h4>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>옷차림:</strong> 경량 패딩, 방수 점퍼, 얇은 긴팔 여러 벌, 미끄럼 방지 신발.</li>
                        <li><strong>전자기기:</strong> 3구 멀티탭, 보조배터리, (필요시) 여행용 전기장판/전기포트.</li>
                        <li><strong>기타:</strong> 우산, 선글라스, 자외선 차단제, 휴대폰 스트랩, 상비약, 핫팩.</li>
                    </ul>
                `
            },
            transport: {
                title: '교통 정보',
                content: `
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">국가 간 이동 (스페인 ↔ 포르투갈)</h4>
                    <p class="mb-4 text-[#8B4513]">가장 빠른 방법은 <strong>비행기</strong>(저가항공 이용 시 저렴), 가장 저렴한 방법은 <strong>버스</strong>(7~10시간 소요)입니다. 기차는 비효율적이므로 추천하지 않습니다.</p>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">국내 이동</h4>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>스페인 내:</strong> 고속 열차 <strong>AVE</strong>가 가장 빠르고 편리합니다. (예: 마드리드-바르셀로나 약 3시간)</li>
                        <li><strong>포르투갈 내:</strong> 기차 <strong>CP</strong>가 효율적입니다. (예: 리스본-포르투 약 3시간)</li>
                    </ul>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">도시 내 대중교통</h4>
                    <p class="text-[#8B4513]">각 도시별 교통카드(바르셀로나 T-Casual, 리스본 Viva Viagem 등)를 구입하면 비용을 절약할 수 있습니다. 포르투갈에서는 탑승 시 반드시 티켓을 태그해야 벌금을 피할 수 있습니다.</p>
                `
            },
            safety: {
                title: '안전 및 에티켓',
                content: `
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">소매치기 예방</h4>
                    <p class="mb-4 text-[#8B4513]">관광객이 많은 곳에서는 항상 소매치기를 조심해야 합니다.</p>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li>가방은 앞으로 메고, 지퍼를 항상 잠급니다.</li>
                        <li>휴대폰, 지갑은 주머니에 넣지 않고 가방 깊숙이 보관합니다. 휴대폰 스트랩 사용을 추천합니다.</li>
                        <li>현금은 소액만 소지하고 여러 곳에 분산 보관합니다.</li>
                        <li>낯선 사람이 접근하면 경계하고, 테이블 위에 귀중품을 올려두지 않습니다.</li>
                    </ul>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">현지 에티켓</h4>
                     <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>팁 문화:</strong> 필수는 아니지만, 좋은 서비스에 대해 5~10% 정도의 팁을 남기는 것이 일반적입니다.</li>
                        <li><strong>식사 예절:</strong> 식당에서 제공되는 빵이나 올리브는 유료인 경우가 있으니 원치 않으면 거절할 수 있습니다.</li>
                     </ul>
                `
            },
             cost_saving: {
                title: '경비 절약 팁',
                content: `
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">항공권 및 숙박</h4>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>얼리버드 예약:</strong> 항공권과 숙소는 여행 일정이 확정되는 즉시 최대한 빨리 예약하는 것이 가장 저렴합니다.</li>
                        <li><strong>숙소 선택:</strong> 주방이 있는 에어비앤비나 호스텔을 이용하면 외식비 절약에 큰 도움이 됩니다. 마트 물가는 레스토랑보다 훨씬 저렴합니다.</li>
                    </ul>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">교통비</h4>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>장거리 이동:</strong> 도시 간 이동은 기차(AVE)나 버스(Flixbus, ALSA)를 미리 예약하면 할인을 받을 수 있습니다. 스페인 철도청(Renfe)이나 포르투갈 철도청(CP) 공식 웹사이트를 이용하는 것이 수수료를 아끼는 방법입니다.</li>
                        <li><strong>도시 내 이동:</strong> 바르셀로나 T-Casual, 리스본 Viva Viagem 등 여행자를 위한 교통카드를 활용하면 편리하고 경제적입니다.</li>
                        <li><strong>우버 vs 대중교통:</strong> 포르투갈에서는 2인 이상이 이동할 경우 대중교통 요금과 우버 요금의 차이가 크지 않아 시간과 노력을 절약하는 데 유리할 수 있습니다. 그러나 스페인에서는 우버 가격이 대중교통보다 3배 정도 비싸므로, 대중교통을 주로 이용하는 것이 예산 절감에 더 효과적입니다.</li>
                    </ul>
                    <h4 class="font-semibold text-lg text-[#A0522D] mb-2">식비 및 관광</h4>
                    <ul class="list-disc list-inside space-y-2 text-[#8B4513]">
                        <li><strong>점심 특선:</strong> 스페인과 포르투갈 식당에는 '메누 델 디아(Menu del Día)'라는 저렴한 점심 코스 메뉴가 있습니다. 2~3코스 요리와 음료가 포함되어 있어 가성비가 매우 좋습니다.</li>
                        <li><strong>구글 지도 활용:</strong> 방문하려는 식당의 최신 메뉴판 사진을 구글 지도에서 확인하면 가격을 미리 예측할 수 있습니다.</li>
                        <li><strong>무료 입장:</strong> 스페인에는 특정 요일이나 시간대에 무료 입장이 가능한 관광지가 많습니다. (예: 바르셀로나 몬주익 성(일요일 오후 3시 이후), 프라도 미술관(저녁 시간대))</li>
                    </ul>
                `
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');
            const planButtons = document.querySelectorAll('.plan-button');
            const itineraryDetailsContainer = document.getElementById('itinerary-details');
            const cityInfoContainer = document.getElementById('city-info-container');
            const infoTabButtons = document.querySelectorAll('.info-tab');
            const infoContentContainer = document.getElementById('info-content-container');

            function renderItinerary(id) {
                const itinerary = itinerariesData[id];
                const citiesByDay = {};
                itinerary.days.forEach(day => {
                    if (!citiesByDay[day.city]) {
                        citiesByDay[day.city] = [];
                    }
                    citiesByDay[day.city].push(day);
                });

                let html = `<div class="p-4 rounded-lg bg-[#F5F5DC]/50">
                                <h3 class="text-xl font-bold text-center text-[#A0522D] mb-2">${itinerary.title}</h3>
                                <p class="text-center text-[#8B4513] mb-2">${itinerary.description}</p>
                                <p class="text-center text-xl font-bold text-[#A0522D] mb-6">총 예상 경비: ${itinerary.total_estimated_cost_range} (2인 기준, 항공권 및 축구 티켓 별도)</p>
                                <div class="mb-6 space-y-2 p-4 bg-white rounded-lg shadow-sm">
                                    <h4 class="font-bold text-lg text-[#A0522D]">⭐ 핵심 일정 (축구 경기)</h4>`;
                itinerary.highlights.forEach(highlight => {
                     html += `<p class="text-md text-gray-700">✔️ ${highlight.text}</p>`;
                     html += `<p class="text-sm italic text-[#8B4513] ml-6">${highlight.dateNote}</p>`;
                });
                html += `</div><div class="space-y-4">`;

                for (const city in citiesByDay) {
                    html += `
                        <div class="p-4 rounded-lg bg-white shadow-md" x-data="{ open: false }">
                            <button @click="open = !open" class="w-full flex justify-between items-center text-left">
                                <h4 class="font-bold text-xl text-[#CD853F]">${citiesByDay[city][0].city} (${citiesByDay[city].length}박)</h4>
                                <span x-text="open ? '−' : '+'" class="text-2xl text-[#A0522D]"></span>
                            </button>
                            <div x-show="open" x-cloak x-transition class="space-y-4 mt-4 border-t border-gray-200 pt-4">`;
                    citiesByDay[city].forEach(day => {
                        html += `
                            <div class="iti-card border-l-2 border-gray-300 pl-4">
                                <p class="font-bold text-lg text-[#A0522D]">Day ${day.day}</p>
                                <p class="text-sm text-gray-700 mt-1">${day.activities}</p>
                                <ul class="text-sm text-gray-600 space-y-1 mt-2">
                                    <li><strong>💵 예상 경비:</strong> ${day.daily_cost}</li>
                                    <li><strong>🚗 교통:</strong> ${day.transport}</li>
                                </ul>
                            </div>
                        `;
                    });
                    html += `</div></div>`;
                }

                html += `</div></div>`;
                itineraryDetailsContainer.innerHTML = html;
            }
            
            function renderCitiesInfo() {
                let html = '';
                citiesData.forEach(city => {
                    html += `
                        <div class="border border-gray-200 rounded-lg bg-white/80" x-data="{ open: false }">
                            <button @click="open = !open" class="w-full flex justify-between items-center p-4 text-left">
                                <h3 class="text-lg font-semibold text-[#8B4513]">${city.icon} ${city.name}</h3>
                                <span x-text="open ? '−' : '+'" class="text-xl text-[#A0522D]"></span>
                            </button>
                            <div x-show="open" x-cloak x-transition class="p-4 border-t border-gray-200">
                                <h4 class="font-semibold text-md text-[#A0522D] mb-2">🏞️ 풍경과 경험</h4>
                                <ul class="list-disc list-inside space-y-2 text-gray-700 mb-4">
                                    ${city.sights.map(item => `<li><strong>${item.name}</strong>: ${item.desc}</li>`).join('')}
                                </ul>
                                <h4 class="font-semibold text-md text-[#A0522D] mb-2">🍲 대표 음식</h4>
                                <p class="text-sm text-gray-700">${city.food}</p>
                            </div>
                        </div>
                    `;
                });
                cityInfoContainer.innerHTML = html;
            }
            
            function renderInfoContent(tab) {
                const info = infoData[tab];
                infoContentContainer.innerHTML = `<div id="${tab}-section" class="p-4">${info.content}</div>`;
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.dataset.target;
                    
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });

                    if (targetId === 'cities') {
                        renderCitiesInfo();
                    }
                });
            });
            
            planButtons.forEach(button => {
                button.addEventListener('click', () => {
                    planButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    renderItinerary(button.dataset.itinerary);
                });
            });
            
            infoTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    infoTabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    renderInfoContent(button.dataset.infotab);
                });
            });

            renderItinerary('1');
            renderCitiesInfo();
            renderInfoContent('weather');

            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            let budgetChart;
            
            const flightCostSlider = document.getElementById('flightCost');
            const lodgingCostSlider = document.getElementById('lodgingCost');
            const foodCostSlider = document.getElementById('foodCost');
            const activityCostSlider = document.getElementById('activityCost');
            
            const flightValueSpan = document.getElementById('flightValue');
            const lodgingValueSpan = document.getElementById('lodgingValue');
            const foodValueSpan = document.getElementById('foodValue');
            const activityValueSpan = document.getElementById('activityValue');
            const totalBudgetSpan = document.getElementById('totalBudget');

            const eurToKrwRate = 1450; 

            function updateBudget() {
                const flightCost = parseInt(flightCostSlider.value);
                const lodgingCost = parseInt(lodgingCostSlider.value) * 14 * eurToKrwRate;
                const foodCost = parseInt(foodCostSlider.value) * 14 * eurToKrwRate;
                const activityCost = parseInt(activityCostSlider.value) * 14 * eurToKrwRate;
                const transportInterCity = 260000;
                const transportIntraCity = 300000;
                const footballTicket = 400000;
                const etc = 575000;
                
                const total = flightCost + lodgingCost + foodCost + activityCost + transportInterCity + transportIntraCity + footballTicket + etc;

                flightValueSpan.textContent = flightCost.toLocaleString();
                lodgingValueSpan.textContent = lodgingCostSlider.value;
                foodValueSpan.textContent = foodCostSlider.value;
                activityValueSpan.textContent = activityCostSlider.value;
                totalBudgetSpan.textContent = `약 ${Math.round(total / 10000).toLocaleString()} 만원`;

                const chartData = {
                    labels: ['항공권', '숙박비', '식비', '활동/입장료', '교통비', '축구티켓', '기타'],
                    datasets: [{
                        data: [flightCost, lodgingCost, foodCost, activityCost, transportInterCity + transportIntraCity, footballTicket, etc],
                        backgroundColor: ['#A0522D', '#CD853F', '#DEB887', '#F5DEB3', '#D2B48C', '#BC8F8F', '#F4A460'],
                        borderColor: '#FDF5E6',
                        borderWidth: 2,
                    }]
                };

                if (budgetChart) {
                    budgetChart.data = chartData;
                    budgetChart.update();
                } else {
                    budgetChart = new Chart(budgetCtx, {
                        type: 'doughnut',
                        data: chartData,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        font: {
                                            family: "'Noto Sans KR', sans-serif"
                                        }
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            if (context.parsed !== null) {
                                                label += new Intl.NumberFormat('ko-KR', { style: 'currency', currency: 'KRW' }).format(context.parsed);
                                            }
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }

            [flightCostSlider, lodgingCostSlider, foodCostSlider, activityCostSlider].forEach(slider => {
                slider.addEventListener('input', updateBudget);
            });

            updateBudget();
            
            const alpineScript = document.createElement('script');
            alpineScript.src = 'https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js';
            alpineScript.defer = true;
            document.head.appendChild(alpineScript);
        });
    </script>
</body>
</html>
